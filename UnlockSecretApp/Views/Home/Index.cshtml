

<link rel="stylesheet" href="~/css/main.css" />

<
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Сюрприз для тебя</title>

</head>
<body>
    <div class="parallax-layer layer1"></div>
    <div class="parallax-layer layer2"></div>
    <canvas id="hearts"></canvas>

    <div class="container">
        <h1>💞!</h1>

        <svg class="heart-svg" viewBox="0 0 32 29.6">
            <path fill="#ff6ec7" d="M23.6,0c-2.7,0-5,1.8-6,4.3C16.4,1.8,14.1,0,11.4,0C7,0,3.4,3.6,3.4,8.1c0,4.5,8.6,10.3,13,15.5
      c4.4-5.2,13-11,13-15.5C28.6,3.6,25,0,20.6,0H23.6z" />
        </svg>

        <div class="code-inputs">
            <input type="text" maxlength="2" id="d1" placeholder="дд">
            <input type="text" maxlength="2" id="d2" placeholder="мм">
            <input type="text" maxlength="2" id="d3" placeholder="дд">
            <input type="text" maxlength="2" id="d4" placeholder="мм">
        </div>

        <button class="btn" id="openBtn">Открыть</button>
        <div class="message" id="message"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        // ======= JS =======

        // Canvas сердечки
        const canvas = document.getElementById('hearts');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const hearts = [];
        function random(min,max){ return Math.random()*(max-min)+min; }
        class Heart {
          constructor() {
            this.x=random(0,canvas.width);
            this.y=random(0,canvas.height);
            this.size=random(10,20);
            this.speed=random(1,3);
            this.opacity=random(0.5,1);
          }
          draw(){
            ctx.fillStyle=`rgba(255,110,199,${this.opacity})`;
            ctx.beginPath();
            ctx.moveTo(this.x,this.y);
            ctx.bezierCurveTo(this.x,this.y-this.size/2,this.x-this.size,this.y-this.size/2,this.x-this.size,this.y);
            ctx.bezierCurveTo(this.x-this.size,this.y+this.size/2,this.x,this.y+this.size/1.5,this.x,this.y+this.size);
            ctx.bezierCurveTo(this.x,this.y+this.size/1.5,this.x+this.size,this.y+this.size/2,this.x+this.size,this.y);
            ctx.bezierCurveTo(this.x+this.size,this.y-this.size/2,this.x,this.y-this.size/2,this.x,this.y);
            ctx.fill();
          }
          update(){
            this.y-=this.speed;
            if(this.y<-20)this.y=canvas.height+20;
            this.draw();
          }
        }
        for(let i=0;i<30;i++)hearts.push(new Heart());
        function animate(){ ctx.clearRect(0,0,canvas.width,canvas.height); hearts.forEach(h=>h.update()); requestAnimationFrame(animate);}
        animate();
        window.addEventListener('resize',()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight;});

        // Parallax
        const layers=document.querySelectorAll('.parallax-layer');
        document.addEventListener('mousemove',e=>{
          const x=e.clientX/window.innerWidth;
          const y=e.clientY/window.innerHeight;
          layers[0].style.transform=`translate(${x*50}px, ${y*50}px)`;
          layers[1].style.transform=`translate(${x*100}px, ${y*100}px)`;
        });

        // ======= Логика кода =======
        const code = "0105"; // пример правильной даты
        const openBtn = document.getElementById('openBtn');
        const message = document.getElementById('message');

        openBtn.addEventListener('click',()=>{
          const inputCode = document.getElementById('d1').value+
                            document.getElementById('d2').value+
                            document.getElementById('d3').value+
                            document.getElementById('d4').value;
          if(inputCode === code){
            confetti({ particleCount: 150, spread: 100, origin: { y:0.6 } });
            typeMessage("Поздравляю! 🎉\nТы ввела правильную дату!\nСчастья, улыбок и любви 💖");
          }else{
            typeMessage("Неверная комбинация 😢\nПопробуй ещё раз...");
          }
        });

        function typeMessage(text){
          message.textContent="";
          let i=0;
          const interval = setInterval(()=>{
            message.textContent+=text[i];
            i++;
            if(i>=text.length)clearInterval(interval);
          },50);
        }
    </script>
</body>
</html>
